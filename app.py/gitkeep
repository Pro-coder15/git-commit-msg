import streamlit as st
import git
import os

def generate_commit_message(diff: str) -> str:
    # Placeholder function for generating commit messages
    # Implement your logic here
    return f"Generated commit message for diff: {diff}"

def main():
    st.title("Git Commit Message Generator")

    repo_path = st.text_input("Enter the path to your Git repository:")

    if repo_path and os.path.isdir(repo_path):
        try:
            repo = git.Repo(repo_path)
            diffs = repo.git.diff("HEAD~1", "HEAD")
            if diffs:
                st.text_area("Git Diff", diffs, height=200)
                commit_message = generate_commit_message(diffs)
                st.text_area("Suggested Commit Message", commit_message, height=100)
            else:
                st.write("No changes detected.")
        except git.exc.InvalidGitRepositoryError:
            st.error("Invalid Git repository path.")
    else:
        st.warning("Please enter a valid Git repository path.")

if __name__ == "__main__":
    main()
